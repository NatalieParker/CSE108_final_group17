{% extends "base.html" %}
{% block title %}CSE 108 Final: {{ show.title }}{% endblock %}
{% block body %}

  <div style="display: flex; gap: 20px; align-items: flex-start;">
    <img
      src="{{ show.cover or url_for('static', filename='covers/default.jpg') }}"
      alt="{{ show.title }} cover"
      style="width:200px; height:auto; border-radius:6px;"
    >
  </div>

  <h1>{{ show.title }}</h1>

  <section>
    <p><strong>Director:</strong> {{ show.director or "N/A" }}</p>
    <p><strong>Cast:</strong> {{ show.cast or "N/A" }}</p>
    <p><strong>Release Year:</strong> {{ show.release_year or "N/A" }}</p>
    <p><strong>Rating:</strong> {{ show.rating or "N/A" }}</p>
    <p><strong>Seasons:</strong> {{ show.seasons or "N/A" }}</p>
    <p><strong>Genres:</strong> {{ show.genres or "N/A" }}</p>
    <p><strong>Description:</strong></p>
    <p>{{ show.description or "No description available." }}</p>
  </section>

  <hr>

  <section>
    <h2>Episodes</h2>

    {% if episodes %}
      <ul>
        {% for ep in episodes %}
          {% if maxWatchedEpisode and ep.episode_number <= maxWatchedEpisode %}
            <li style="color: #999;">Episode {{ ep.episode_number }}</li>
          {% else %}
            <li>Episode {{ ep.episode_number }}</li>
          {% endif %}
        {% endfor %}
      </ul>
    {% else %}
      <p>No episodes available.</p>
    {% endif %}
  </section>

  <hr>

  <section>
    <h2>Reviews</h2>

    {% if reviews %}
      {% for review, username, rating, text in reviews %}
        <div class="review">
          <p>
            <strong>{{ username }}</strong>
            rated it <strong>{{ rating }}/5</strong>
          </p>
          <p>{{ text }}</p>
        </div>
        <hr>
      {% endfor %}
    {% else %}
      <p>No reviews yet.</p>
    {% endif %}
  </section>

{% endblock %}